/**
 * Created by lanjian on 15/4/2.
 */

function File(opt) {
  this.fs = opt.fs;
	this.res = opt.res;
	this.file = opt.file;
  this.type = opt.type;

  this.openFile();

};

File.prototype.openFile = function(){
  var res = this.res,
		header = this.getHeaderOption();

	this.fs.readFile(this.file,'utf-8', function(error, data){

		res.writeHead(200, header);
		res.end(data);
	});

	return this;
}

File.prototype.getHeaderOption = function(){
	var contType = this.getContentType(),
		header = {'Content-Type': contType};

	return header;

}

File.prototype.getContentType = function(){

	var arr = this.file.split('.');

	this.type = arr[arr.length - 1];

	switch (this.type){
		case 'css':
			return 'text/css';

		case 'js':
			return 'application/javascript';

		case 'html':
			return 'text/html;charset=UTF-8';
	}

	return 'text/plain';
}

module.exports = File;
